name: pr_review_notice

on:
  pull_request_target:
    types: [opened]

permissions:
  issues: write  # required to comment on PRs (PRs are issues for comments)

jobs:
  comment_review_notice:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const { owner, repo } = context.repo;

            const pr = context.payload.pull_request;
            const pr_number = pr.number;
            const pr_author = pr.user.login;

            // Maintainers list
            const maintainers = [
              "ShahzaibAhmad05",
              "d-khalid",
            ].map(u => u.toLowerCase());

            const isMaintainer = maintainers.includes(pr_author.toLowerCase());

            // Only comment if PR author is NOT a maintainer/admin
            if (isMaintainer) return;

            await github.rest.issues.createComment({
              owner,
              repo,
              issue_number: pr_number,
              body: "Thank you for the pull request! âœ…\n\nA maintainer will review this soon. Please be patient while we take a look. ðŸ™Œ",
            });
